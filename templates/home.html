{% extends "layout.html" %}

{% block title %}
    Homepage
{% endblock %}

{% block main %}

<div class="container" style="display: flex; justify-content: center; z-index: 2; position: relative; width:100%;">


    <!-- Left section (button and image) -->
    <div style="flex: 10; display: flex; flex-direction: column; align-items: center;">
        <form method="post" action="/home_tut" style="position: absolute; left:5px; z-index: 3;">
            <button class="btn2" type="submit" style="background: none; border: none;">
                <h2>โ</h2>
            </button>
        </form>
        <p style="position: absolute; padding-top: 60px; left:5px; background: none; border: none; z-index: 2; cursor: pointer; text-align: left; margin-left: 7px;">
            ูุณุงุนุฏุฉ
        </p>

        {% if conf %}
        <div class="confetti">
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
            <div class="confetti-piece"></div>
        </div>
        {% endif %}

        <div class="image-container" style="border-style: solid;box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.4);">
            <img src="/{{img}}" class="rounded-image" alt="Child's Image">
        </div>

        <h1 >{{ name }}</h1>
        <form method="GET" action="/view_development">
            {% if gender == 'female' %}
                <h3>ุชุจูุบ {{ age }}<h6><button type="submit">ูุณุชูู {{name}}</button></h6></h3>
            {% else %}
                <h3>ูุจูุบ {{ age }}<h6><button type="submit">ูุณุชูู {{name}}</button></h6></h3>
            {% endif %}
            {% if disability %}
                <p>ุทููู ูุฌุจ ุงู ูููู ุงูููุงุฑุงุช ูููุฆุฉ ุงูุนูุฑูุฉ {{ chosen }} ุณููุงุช</p>
            {% endif %}
        </form>
    </div>


</div>


{%if data%}
<table style="width:100%">
    <tr>
        <td style="width: 80%">
            <div style="width:80%; margin-left: auto;
  margin-right: auto; text-align: right">
            <!-- Heading with question mark icon to open modal -->
<h2 dir="rtl">ูุงุฆูุฉ ุงูุฃูุฏุงู
    <button style="font-size:20px; background-color: transparent; border-color: transparent;" data-bs-toggle="modal" data-bs-target="#infoModal" aria-label="Information">
        ๏ฟฝ
    </button>
</h2>

<!-- Text based on gender -->


<!-- Modal structure for additional information -->
<div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="infoModalLabel">ูุง ูู ูุงุฆูุฉ ุงูุงูุฏุงูุ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                {% if gender == 'female' %}
                <p>ุงูููุงุฑุงุช ุงูุชุงููุฉ ูู ุงูุฃูุฏุงู ุงูุชู ูุฌุจ ุงูุนูู ุนูููุง ูุน ุทููุชู {{ name }} ูุฑุชุจุฉ ุญุณุจ ุงูุฃูููุฉ.
                   ุงุทูุน ุนูู ุงูุฃูุดุทุฉ ุงูููุชุฑุญุฉ ูุชุณุงุนุฏู ุนูู ุชุนููู ุงูููุงุฑุฉุ ูู ุญุงู ุชุนูู ุทููู ุงูููุงุฑุฉ ุถุน ุงูุนูุงูุฉ โ๏ธ ููุงูุชูุงุก ูููุง.</p>
                {% else %}
                <p>ุงูููุงุฑุงุช ุงูุชุงููุฉ ูู ุงูุฃูุฏุงู ุงูุชู ูุฌุจ ุงูุนูู ุนูููุง ูุน ุทููู {{ name }} ูุฑุชุจุฉ ุญุณุจ ุงูุฃูููุฉ.
                   ุงุทูุน ุนูู ุงูุฃูุดุทุฉ ุงูููุชุฑุญุฉ ูุชุณุงุนุฏู ุนูู ุชุนููู ุงูููุงุฑุฉุ ูู ุญุงู ุชุนูู ุทููู ุงูููุงุฑุฉ ุถุน ุงูุนูุงูุฉ โ๏ธ ููุงูุชูุงุก ูููุง.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

            </div>
        </td>
        <td  style="width: 50%">
            <div style="width: 80%; text-align: right">
                <form method="post" action="/ach"><h4>{{total}}/{{done}}&nbsp;<button type="submit"><h2>๐</h2></button></h4>
            </form></div>
        </td>
    </tr>
</table>
<form method="GET" action="/home" style="width:100%; padding-right: 10%; padding-left: 10%">
    <div class="filter-container" style="display: flex; gap: 10px;">

        <!-- Category Filter -->

        <select name="category" class="form-select">
            <option value="">ุฌููุน ุงููุฌุงูุงุช</option>
            <option value="ุงููุบุฉ"{% if selected_category == 'ุงููุบุฉ' %}selected {%endif%}>๐ฃ ุงููุบุฉ</option>
            <option value="ุงูุฅุฏุฑุงู" {% if selected_category == 'ุงูุฅุฏุฑุงู' %}selected {%endif%}>๐ง ุงูุฅุฏุฑุงู</option>
            <option value="ุงูุญุฑูุฉ"{% if selected_category == 'ุงูุญุฑูุฉ' %}selected {%endif%}>๐โโ๏ธ ุงูุญุฑูุฉ</option>
            <option value="ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ"{% if selected_category == 'ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ' %}selected {%endif%}>๐ด ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ</option>
            <option value="ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ"{% if selected_category == 'ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ' %}selected {%endif%}>๐ฅ ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ</option>
        </select>

        <!-- Age Range Filter -->
        <select name="age_range" class="form-select">
            <option value="">ุฌููุน ุงููุฆุงุช ุงูุนูุฑูุฉ</option>
            {% for range in ranges %}
                <option value="{{ range }}" {% if selected_age_range == range %}selected{%endif%}>{{ range }}</option>
            {% endfor %}
        </select>

        <!-- Assessment Filter -->
        <select name="scale" class="form-select">
            <option value="">ุฌููุน ุงูุชููููุงุช</option>
            <option value="1" {% if selected_scale == '1' %}selected{%endif%}>โน๏ธ ููุฏ ุงูุชูุฏู</option>
            <option value="0" {% if selected_scale == '0' %}selected{%endif%}>โ ูู ููุชูู</option>
        </select>

        <!-- Filter Button -->
        <button type="submit" class="btn btn-primary">ุจุญุซ</button>
    </div>
</form>
            <table id="myTable" class="blended-table" style="  margin-left: auto;
  margin-right: auto; width: 80%;  background-color: rgba(255,255,255, 0.1);">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>ุงูููุงุฑุฉ</th>
                        <th>ุงูุชูููู</th>
                        <th>-</th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in data %}
<tr style="width: 80%; background-color:
    {% if i.category == 'ุงููุบุฉ' %} rgba(179, 46, 49, 0.4);
    {% elif i.category == 'ุงูุฅุฏุฑุงู' %} rgba(250, 208, 82, 0.4);
    {% elif i.category == 'ุงูุญุฑูุฉ' %} rgba(124, 184, 75, 0.4);
    {% elif i.category == 'ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ' %} rgba(132, 165, 217, 0.4);
    {% elif i.category == 'ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ' %} rgba(159, 103, 199, 0.4);
    {% endif %}">
    <td style='width:10%;'><strong><h5>{{ loop.index }}</h5></strong></td>
    <td>
        <h3 class="card-title" style="display: inline; margin-right: 10px;">
            {% if i.category == 'ุงููุบุฉ' %}๐ฃ{% elif i.category == 'ุงูุฅุฏุฑุงู' %}๐ง{% elif i.category == 'ุงูุญุฑูุฉ' %}๐โโ๏ธ{% elif i.category == 'ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ' %}๐ด{% elif i.category == 'ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ' %}๐ฅ{% endif %}
        </h3>
        <span style="font-size: 17px;">{{ i.category }}</span>
        <p class="card-text"><strong>ุงูุนูุฑ:</strong> {% if i.age == '0 โ 1' %} ููุฐ ุงูููุงุฏุฉ โ 1 {% else %}{{ i.age }}{% endif %}</p>
        <div><strong>{{ i.title }} - {{ i.performance }}</strong>&nbsp;</div>
        <br>
        <button style="font-size: 15px;" class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#activitiesModal{{ loop.index }}" data-title="{{ i.title }}" data-activities="{{ i.suggested_activities|tojson }}">
            ุฃูุดุทุฉ ููุชุฑุญุฉ
        </button>

        <!-- Modal for Suggested Activities -->
        <div class="modal fade" id="activitiesModal{{ loop.index }}" tabindex="-1" aria-labelledby="activitiesModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="activitiesModalLabel">ุฃูุดุทุฉ ููุชุฑุญุฉ</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="activitiesModalBody{{ loop.index }}">
                        <h6>{{ i.performance }}</h6>
                        <ul class="list-group">
                            {% for activity in i.suggested_activities %}
                                <li class="list-group-item" style="background-color: rgb(255,255,255,0.3)">{{ activity }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>


                        </td>
                        <td>
                            <form method="post" action="/update2">
                                <input type="hidden" name="category" value="{{ i.category }}">
                                <input type="hidden" name="performance_id" value="{{ i.id }}">
                                <input type="hidden" name="child_age" value="{{ i.age }}">
                                <input type="hidden" name="performance_title" value="{{ i.title }}">
                                <label>
        <input type="radio" name="scale" value="2" id="scale-2" {% if i.scale == 2 %}checked{% endif %}>
        <p>โ๏ธ</p>
    </label>

    <label>
        <input type="radio" name="scale" value="1" id="scale-1" {% if i.scale == 1 %}checked{% endif %}>
        <p>โน๏ธ</p>
    </label>

    <label>
        <input type="radio" name="scale" value="0" id="scale-0" {% if i.scale == 0 %}checked{% endif %}>
        <p>โ</p>
    </label>
                                <label>
                        <div class="mb-3">
                            <textarea name="comment" placeholder="ููุงุญุธุฉ" class="form-control" id="comment">{{i.comment}}</textarea>

                        </div>
                    </label></td><td style="width: 10%">
                                <button type="submit">ุชุฃููุฏ</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>


{%else%}
{% if selected_scale or selected_category or selected_age_range %}
<table style="width:100%">
    <tr>
        <td style="width: 80%">
            <div style="width:80%; margin-left: auto;
  margin-right: auto; text-align: right">
            <h2 dir="rtl">ูุงุฆูุฉ ุงูุฃูุฏุงู</h2>
                {% if gender=='female' %}
                <p>
                ุงูููุงุฑุงุช ุงูุชุงููุฉ ูู ุงูุฃูุฏุงู ุงูุชู ูุฌุจ ุงูุนูู ุนูููุง ูุน ุทููุชู {{name}} ูุฑุชุจุฉ ุญุณุจ ุงูุฃูููุฉ.
                ุงุทูุน ุนูู ุงูุงูุดุทุฉ ุงูููุชุฑุญุฉ ูุชุณุงุนุฏู ุนูู ุชุนููู ุงูููุงุฑุฉ, ูู ุญุงู ุชุนูู ุทููู ุงูููุงุฑุฉ ุถุน ุงูุนูุงูุฉ โ๏ธ ููุงูุชูุงุก ูููุง
            </p>
                {%else%}
                <p>
                ุงูููุงุฑุงุช ุงูุชุงููุฉ ูู ุงูุฃูุฏุงู ุงูุชู ูุฌุจ ุงูุนูู ุนูููุง ูุน ุทููู {{name}} ูุฑุชุจุฉ ุญุณุจ ุงูุฃูููุฉ.
                ุงุทูุน ุนูู ุงูุงูุดุทุฉ ุงูููุชุฑุญุฉ ูุชุณุงุนุฏู ุนูู ุชุนููู ุงูููุงุฑุฉ, ูู ุญุงู ุชุนูู ุทููู ุงูููุงุฑุฉ ุถุน ุงูุนูุงูุฉ โ๏ธ ููุงูุชูุงุก ูููุง
            </p>
                {%endif%}
            </div>
        </td>
        <td  style="width: 50%">
            <div style="width: 80%; text-align: right">
                <form method="post" action="/ach"><h4>{{total}}/{{done}}&nbsp;<button type="submit"><h2>๐</h2></button></h4>
            </form></div>
        </td>
    </tr>
</table>
                <form method="GET" action="/home" style="width:100%; padding-right: 10%; padding-left: 10%">
    <div class="filter-container" style="display: flex; gap: 10px;">

        <!-- Category Filter -->

        <select name="category" class="form-select">
            <option value="">ุฌููุน ุงููุฌุงูุงุช</option>
            <option value="ุงููุบุฉ"{% if selected_category == 'ุงููุบุฉ' %}selected {%endif%}>๐ฃ ุงููุบุฉ</option>
            <option value="ุงูุฅุฏุฑุงู" {% if selected_category == 'ุงูุฅุฏุฑุงู' %}selected {%endif%}>๐ง ุงูุฅุฏุฑุงู</option>
            <option value="ุงูุญุฑูุฉ"{% if selected_category == 'ุงูุญุฑูุฉ' %}selected {%endif%}>๐โโ๏ธ ุงูุญุฑูุฉ</option>
            <option value="ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ"{% if selected_category == 'ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ' %}selected {%endif%}>๐ด ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ</option>
            <option value="ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ"{% if selected_category == 'ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ' %}selected {%endif%}>๐ฅ ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ</option>
        </select>

        <!-- Age Range Filter -->
        <select name="age_range" class="form-select">
            <option value="">ุฌููุน ุงููุฆุงุช ุงูุนูุฑูุฉ</option>
            {% for range in ranges %}
                <option value="{{ range }}" {% if selected_age_range == range %}selected{%endif%}>{{ range }}</option>
            {% endfor %}
        </select>

        <!-- Assessment Filter -->
        <select name="scale" class="form-select">
            <option value="">ุฌููุน ุงูุชููููุงุช</option>
            <option value="1" {% if selected_scale == '1' %}selected{%endif%}>โน๏ธ ููุฏ ุงูุชูุฏู</option>
            <option value="0" {% if selected_scale == '0' %}selected{%endif%}>โ ูู ููุชูู</option>
        </select>

        <!-- Filter Button -->
        <button type="submit" class="btn btn-primary">ุจุญุซ</button>
    </div>
</form>
<h5>ูุง ููุฌุฏ ูุชุงุฆุฌ.</h5>
{%else%}
<table style="width:100%">
    <tr>
        <td style="width: 80%">
            <div style="width:80%; margin-left: auto;
  margin-right: auto; text-align: right">
            <h2 dir="rtl">ูุงุฆูุฉ ุงูุฃูุฏุงู</h2>
            <h5>ุฃุชููุช ุฌููุน ุงูููุงุฑุงุช ุงููุงุฒูุฉ ูุทููู ๐ ุทููู ุงูุขู ููุชูู ุฌููุน ุงูููุงุฑุงุช ุงูุชู ูุญุชุงุฌูุง ๐ฏ</h5></div>
        </td>
        <td  style="width: 50%">
            <div style="width: 80%; text-align: right">
                <form method="post" action="/ach"><h4>{{total}}/{{done}}&nbsp;<button type="submit"><h2>๐</h2></button></h4>
            </form></div>
        </td>
    </tr>
</table>
{%endif%}
{%endif%}
<br>
<h6>ููููู ุงูุงุทูุงุน ุนูู ููุงุฑุงุช ูู ูุฆุงุช ุนูุฑูุฉ ุณุงุจูุฉ:</h6>
            <div class="containerr">

                {% for i in ranges %}
                <form method="POST" action="/activity">
                    <button class="btn card2" name="age_range" value="{{ i }}" type="submit">{{ i }} ุณููุงุช</button>
                </form>
                {% endfor %}
            </div>
<script>
    function adjustWidth(input) {
        input.style.width = (input.value.length + 1) + 'ch';
    }

    // If there's already a value in the input, adjust the width on page load
    document.querySelectorAll('.dynamic-width').forEach(function(input) {
        adjustWidth(input);
    });
    window.onload = function() {
    const confetti = document.querySelector('.confetti');

    // Make the confetti pieces fade out and disappear after 5 seconds
    setTimeout(() => {
        confetti.classList.add('hidden');
    }, 2000);
};

</script>

{% endblock %}
