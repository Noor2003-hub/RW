{% extends "layout.html" %}

{% block title %}
    Activity
{% endblock %}
{% block main %}
    <div dir="ltr">
        <a href="/home" class="btn btn-primary" style="float: left; margin-left:5%">ุงูุนูุฏุฉ ๐๏ธ</a>
    </div>

    <table style="width:100%">
        <tr>
            <td style="width:20%">
                {% if n %}
                    <form method="POST" action="/activity" style="margin-top:20%; height: 100%; width: 100%">
                        <button class="btn btn-primary" style=" height: 50%; width:40%; margin-left:3%;" name="age_range" value="{{ n }}" type="submit"><h3>โฎ</h3></button>
                        <h5> {{n}}</h5>
                    {% endif %}
                    </form>
                </td>
                <td style="width: 60%">
                    <div style="width:100%; text-align: center">
                        <h2>ููุงุฑุงุช ููุทูู ูู {{age_range}} ุณููุงุช</h2>
                    </div>
                </td>
                <td style="width:20%">
                    {% if p %}
                        <form method="POST" action="/activity" style="margin-top:20%; height: 100%; width: 100%">
                            <button class="btn btn-primary" style="height: 50%; width:40%; margin-right:3%;" name="age_range" value="{{ p }}" type="submit"><h3>โฎ</h3></button>
                            <h5>{{p}}</h5>
                        {% endif %}
                        </form>
                    </td>
        </tr>
    </table>

    <div style="display: flex; justify-content: center; gap: 10px;">
        <form method="get" action="/activity">
            <input type="hidden" name="age_range" value="{{ age_range }}">
            <button style='background-color: #B32E31' class="btn2" name="category" value="ุงููุบุฉ" type="submit"><h2>๐ฃ</h2></button>
            <p >ุงููุบุฉ</p>
        </form>
        <form method="get" action="/activity">
            <input type="hidden" name="age_range" value="{{ age_range }}">
            <button style='background-color: #FAD052' class="btn2" name="category" value="ุงูุฅุฏุฑุงู" type="submit"><h2>๐ง</h2></button>
            <p>ุงูุฅุฏุฑุงู</p>
        </form>
        <form method="get" action="/activity">
            <input type="hidden" name="age_range" value="{{ age_range }}">
            <button style='background-color: #7CB84B' class="btn2" name="category" value="ุงูุญุฑูุฉ" type="submit"><h2>๐โโ๏ธ</h2></button>
            <p>ุงูุญุฑูุฉ</p>
        </form>
        <form method="get" action="/activity">
            <input type="hidden" name="age_range" value="{{ age_range }}">
            <button style='background-color: #84A5D9' class="btn2" name="category" value="ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ" type="submit"><h2>๐ด</h2></button>
            <p>ุงููุณุงุนุฏุฉ<br> ุงูุฐุงุชูุฉ</p>
        </form>
        <form method="get" action="/activity">
            <input type="hidden" name="age_range" value="{{ age_range }}">
            <button style='background-color: #9F67C7' class="btn2" name="category" value="ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ" type="submit"><h2>๐ฅ</h2></button>
            <p>ุงููุฎุงูุทุฉ<br> ุงูุงุฌุชูุงุนูุฉ</p>
        </form>
    </div>

    <p style="font-size: small">ุงุฎุชุฑ โ๏ธ ุงุฐุง ุชููู ุทููู ูู ุงูููุงุฑุฉ<br> ุงุฎุชุฑ โน๏ธ ุนูุฏ ูุฌูุฏ ุจุฏุงูุงุช ููููุงุฑุฉ<br> ุงุฎุชุฑ โ ุงุฐุง ูู ูุชููู ุทููู ูู ุงูููุงุฑุฉ</p>
    <h3>ูุฌุงู {{category}}</h3><br>

    <div style="display: flex; justify-content: center;">
        {% if category == 'ุงููุบุฉ' %}
            <table class='table blended-table' style="width: 80%; border-color: black; background-color: rgba(179, 46, 49, 0.2); ">
        {% elif category == 'ุงูุฅุฏุฑุงู' %}
            <table class='table blended-table' style="width: 80%; border-color: black; background-color: rgba(250, 208, 82, 0.4); ">
        {% elif category == 'ุงูุญุฑูุฉ' %}
            <table class='table blended-table' style="width: 80%; border-color: black; background-color: rgba(124, 184, 75, 0.4); ">
        {% elif category == 'ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ' %}
            <table class='table blended-table' style="width: 80%; border-color: black; background-color: rgba(132, 165, 217, 0.4); ">
        {% elif category == 'ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ' %}
            <table class='table blended-table' style="width: 80%; border-color: black; background-color: rgba(159, 103, 199, 0.4); ">
        {% endif %}

        {% for i in data %}
        <tr>
            <td>
                <br>
                <strong>{{i.title}}-{{ i.performance }}</strong><br><br>
                <button class="btn btn-primary" style="font-size: 15px;" type="button" data-bs-toggle="modal" data-bs-target="#activitiesModal{{ loop.index }}">
                    ุฃูุดุทุฉ ููุชุฑุญุฉ
                </button>

                <!-- Modal for Suggested Activities -->
                <div class="modal fade" id="activitiesModal{{ loop.index }}" tabindex="-1" aria-labelledby="activitiesModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="activitiesModalLabel">ุฃูุดุทุฉ ููุชุฑุญุฉ</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <h6>{{ i.performance }}</h6>
                                <ul class="list-group">
                                    {% for activity in i.suggested_activities %}
                                        <li class="list-group-item" style="background-color: rgb(255,255,255,0.3)">{{ activity }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </td>
            <td>
                <form method="post" action="/update">
                    <input type="hidden" name="age_range" value="{{ age_range }}">
                    <input type="hidden" name="performance_id" value="{{ i.id }}">
                    <input type="hidden" name="child_age" value="{{ i.age }}">
                    <input type="hidden" name="performance_title" value="{{ i.title }}">
                    {% if category == 'ุงููุบุฉ' %}
                        <input type="hidden" name="category" value="ุงููุบุฉ">
                    {% elif category == 'ุงูุฅุฏุฑุงู' %}
                        <input type="hidden" name="category" value="ุงูุฅุฏุฑุงู">
                    {% elif category == 'ุงูุญุฑูุฉ' %}
                        <input type="hidden" name="category" value="ุงูุญุฑูุฉ">
                    {% elif category == 'ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ' %}
                        <input type="hidden" name="category" value="ุงููุณุงุนุฏุฉ ุงูุฐุงุชูุฉ">
                    {% elif category == 'ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ' %}
                        <input type="hidden" name="category" value="ุงููุฎุงูุทุฉ ุงูุงุฌุชูุงุนูุฉ">
                    {% endif %}
                    <label>
                        <input type="radio" name="scale" value="2" {% if i.scale == 2 %}checked{% endif %}>
                        <p>โ๏ธ</p>
                    </label>
                    <label>
                        <input type="radio" name="scale" value="1" {% if i.scale == 1 %}checked{% endif %}>
                        <p>โน๏ธ</p>
                    </label>
                    <label>
                        <input type="radio" name="scale" value="0" {% if i.scale == 0 %}checked{% endif %}>
                        <p>โ</p>
                    </label>
                    <label>
                        <div class="mb-3">
                            <textarea name="comment" placeholder="ููุงุญุธุฉ" class="form-control" id="comment">{{i.comment}}</textarea>
                        </div>
                    </label>
            </td>
            <td style="width: 10%">
                <button type="submit">ุชุฃููุฏ</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    </table>

    <script>
        function adjustWidth(input) {
            input.style.width = (input.value.length + 1) + 'ch';
        }

    </script>
{% endblock %}
